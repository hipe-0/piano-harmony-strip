<html>
<body>
    <h3>PDF Piano Harmony Strip Scale Generator</h3>
    <label for="pdfSelect">Choose a PDF to Scale:</label>
    <select id="pdfSelect">
        <option value="pdf/base-strip.pdf">File 1</option>

        <!-- Add more PDF options as needed -->
    </select>
    <br>
    <label for="scaleFactor">Enter Scale Factor:</label>
    <input type="number" id="scaleFactor" value="1" step="0.1">
    <br><br>
    <button type="button" onclick="scalePdf()">Scale and Download</button>

    <script src="https://unpkg.com/pdf-lib"></script>
    <script>
        async function scalePdf() {
            const pdfSelect = document.getElementById('pdfSelect').value;
            const scaleFactor = parseFloat(document.getElementById('scaleFactor').value);

            // Fetch the selected PDF
            const response = await fetch(pdfSelect);
            const arrayBuffer = await response.arrayBuffer();

            // Load and scale the PDF
            const pdfDoc = await PDFLib.PDFDocument.load(arrayBuffer);
            const pages = pdfDoc.getPages();

            for (const page of pages) {
                const { width, height } = page.getSize();
                // Scale the page size (canvas size)
                const newWidth = width * scaleFactor;
                const newHeight = height * scaleFactor;

                // Set the new size for the page
                page.setSize(newWidth, newHeight);
                
                //page.scale(scaleFactor, scaleFactor);

                // Apply scale transformation to the content inside the page
                page.scaleContent(scaleFactor, scaleFactor);
            }

            // Save the scaled PDF
            const scaledPdfBytes = await pdfDoc.save();
            const blob = new Blob([scaledPdfBytes], { type: "application/pdf" });
            const link = document.createElement("a");
            link.href = URL.createObjectURL(blob);
            link.download = "scaled_output.pdf";
            link.click();
        }
    </script>
</body>
</html>
